[{"C:\\Users\\Jhun\\OneDrive\\Documents\\lay-family-tree\\client\\src\\index.js":"1","C:\\Users\\Jhun\\OneDrive\\Documents\\lay-family-tree\\client\\src\\App.js":"2","C:\\Users\\Jhun\\OneDrive\\Documents\\lay-family-tree\\client\\src\\components\\Header.js":"3","C:\\Users\\Jhun\\OneDrive\\Documents\\lay-family-tree\\client\\src\\components\\Tree.js":"4","C:\\Users\\Jhun\\OneDrive\\Documents\\lay-family-tree\\client\\src\\components\\Error.js":"5","C:\\Users\\Jhun\\OneDrive\\Documents\\lay-family-tree\\client\\src\\components\\LandingPage.js":"6","C:\\Users\\Jhun\\OneDrive\\Documents\\lay-family-tree\\client\\src\\components\\Table.js":"7","C:\\Users\\Jhun\\OneDrive\\Documents\\lay-family-tree\\client\\src\\components\\Create.js":"8","C:\\Users\\Jhun\\OneDrive\\Documents\\lay-family-tree\\client\\src\\components\\NodeCard.js":"9","C:\\Users\\Jhun\\OneDrive\\Documents\\lay-family-tree\\client\\src\\components\\Modal.js":"10","C:\\Users\\Jhun\\OneDrive\\Documents\\lay-family-tree\\client\\src\\components\\Edit.js":"11","C:\\Users\\Jhun\\OneDrive\\Documents\\lay-family-tree\\client\\src\\components\\React-Table-Components\\ReactTable.js":"12","C:\\Users\\Jhun\\OneDrive\\Documents\\lay-family-tree\\client\\src\\components\\NodeCardContent.js":"13","C:\\Users\\Jhun\\OneDrive\\Documents\\lay-family-tree\\client\\src\\components\\React-Table-Components\\GlobalFilter.js":"14","C:\\Users\\Jhun\\OneDrive\\Documents\\lay-family-tree\\client\\src\\components\\React-Table-Components\\columns.js":"15"},{"size":268,"mtime":1612789464566,"results":"16","hashOfConfig":"17"},{"size":787,"mtime":1613117251352,"results":"18","hashOfConfig":"17"},{"size":1537,"mtime":1612882365878,"results":"19","hashOfConfig":"17"},{"size":34471,"mtime":1614786040678,"results":"20","hashOfConfig":"17"},{"size":559,"mtime":1611242115169,"results":"21","hashOfConfig":"17"},{"size":6927,"mtime":1614616789534,"results":"22","hashOfConfig":"17"},{"size":9664,"mtime":1614716713370,"results":"23","hashOfConfig":"17"},{"size":6602,"mtime":1614441826238,"results":"24","hashOfConfig":"17"},{"size":5338,"mtime":1614194026727,"results":"25","hashOfConfig":"17"},{"size":323,"mtime":1611245291875,"results":"26","hashOfConfig":"17"},{"size":18504,"mtime":1614630635790,"results":"27","hashOfConfig":"17"},{"size":2543,"mtime":1612012729195,"results":"28","hashOfConfig":"17"},{"size":10189,"mtime":1614452530627,"results":"29","hashOfConfig":"17"},{"size":380,"mtime":1611103060520,"results":"30","hashOfConfig":"17"},{"size":1349,"mtime":1611249453801,"results":"31","hashOfConfig":"17"},{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},"1igqcrh",{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"47","usedDeprecatedRules":"34"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},"C:\\Users\\Jhun\\OneDrive\\Documents\\lay-family-tree\\client\\src\\index.js",[],["64","65"],"C:\\Users\\Jhun\\OneDrive\\Documents\\lay-family-tree\\client\\src\\App.js",[],"C:\\Users\\Jhun\\OneDrive\\Documents\\lay-family-tree\\client\\src\\components\\Header.js",[],"C:\\Users\\Jhun\\OneDrive\\Documents\\lay-family-tree\\client\\src\\components\\Tree.js",[],"C:\\Users\\Jhun\\OneDrive\\Documents\\lay-family-tree\\client\\src\\components\\Error.js",[],"C:\\Users\\Jhun\\OneDrive\\Documents\\lay-family-tree\\client\\src\\components\\LandingPage.js",[],"C:\\Users\\Jhun\\OneDrive\\Documents\\lay-family-tree\\client\\src\\components\\Table.js",["66"],"import React, { useState, useEffect } from \"react\";\r\nimport Axios from \"axios\";\r\nimport * as $ from \"jquery\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nimport { ReactTable } from \"./React-Table-Components/ReactTable\";\r\nimport Create from \"./Create.js\";\r\nimport Modal from \"./Modal\";\r\nimport Edit from \"./Edit\";\r\nimport NodeCard from \"./NodeCard\";\r\n\r\nexport default function Table(props) {\r\n  const [update, setUpdate] = useState(0);\r\n  const [tableData, setTableData] = useState([]);\r\n\r\n  const [TreeData, setTreeData] = useState([]);\r\n\r\n  //current node/ clicked node state\r\n  const [nodestate, setNodestate] = useState(0);\r\n  const [currentRow, setcurrentRow] = useState();\r\n\r\n  var [radiochecked, setRadiochecked] = useState(true);\r\n  const [datalist, setDatalist] = useState([]);\r\n\r\n  const switchRadio = () => {\r\n    setRadiochecked(!radiochecked);\r\n  };\r\n  useEffect(() => {\r\n    Axios.get(\"http://localhost:5000/api/get\").then((result) => {\r\n      setTableData(result.data);\r\n    });\r\n  }, [update]);\r\n\r\n  const updateTable = () => {\r\n    //update => useEffect => update tableData => triggers ReactTable rerender\r\n    setUpdate(update + 1);\r\n  };\r\n\r\n  async function dynamicUpdate(obj) {\r\n    let data = tableData;\r\n    await setTableData([]);\r\n    //update an edited node\r\n    try {\r\n      for (let i = 0; i < data.length; i++) {\r\n        if (data[i].id === obj.id) data[i] = obj;\r\n      }\r\n      //delete node from table\r\n      if (obj.method === \"delete\") {\r\n        data = await data.filter((x) => x.id !== obj.id);\r\n      }\r\n    } catch {}\r\n\r\n    if (obj.method === \"create\") {\r\n      setTimeout(() => {\r\n        updateTable();\r\n      }, 500);\r\n    } else {\r\n      await setTableData(data);\r\n    }\r\n  }\r\n  const populateEditFields = (inputNode) => {\r\n    let node = getNode(inputNode.id);\r\n    $(\"#genInput\").val(node.generation);\r\n    $(\"#name\").val(node.name);\r\n    $(\"#birthdate\").val(node.birthdate);\r\n\r\n    if (node.deathdate) {\r\n      $(\"#isDeceased\").attr(\"checked\", true);\r\n      $(\"#deathdate\").css(\"display\", \"block\").val(node.deathdate);\r\n    } else {\r\n      $(\"#isDeceased\").attr(\"checked\", false);\r\n      $(\"#deathdate\").css(\"display\", \"none\");\r\n    }\r\n\r\n    $(\"#parentInput\").val(node.isPartner ? node.partner : node.parent);\r\n\r\n    try {\r\n      $(\"#birthplace-input\").val(node.extradetails.birthplace);\r\n      $(\"#location-input\").val(node.extradetails.location);\r\n      $(\"#extranames-input\").val(node.extradetails.extranames);\r\n      $(\"#fblink-input\").val(node.extradetails.fblink);\r\n      $(\"#profession-input\").val(node.extradetails.profession);\r\n      $(\"textarea.description-input\").val(node.extradetails.description);\r\n    } catch {\r\n      $(\"#birthplace-input\").val(\"\");\r\n      $(\"#location-input\").val(\"\");\r\n      $(\"#extranames-input\").val(\"\");\r\n      $(\"#fblink-input\").val(\"\");\r\n      $(\"#profession-input\").val(\"\");\r\n      $(\"textarea.description-input\").val(\"\");\r\n    }\r\n  };\r\n\r\n  const getNode = (idKey) => {\r\n    for (var i = 0; i < tableData.length; i++) {\r\n      if (tableData[i].id === idKey) {\r\n        return tableData[i];\r\n      }\r\n    }\r\n  };\r\n\r\n  const getPID = (nameKey) => {\r\n    for (var i = 0; i < tableData.length; i++) {\r\n      let namecheck = tableData[i].generation + \" \" + tableData[i].name;\r\n      if ($.trim(namecheck) === $.trim(nameKey)) {\r\n        return tableData[i].id;\r\n      }\r\n    }\r\n  };\r\n\r\n  const resetCreateFields = () => {\r\n    let str = \"\";\r\n    let temparr = [];\r\n    let list = document.getElementById(\"parentSearchDataList\");\r\n    //populate parentSearchDataList\r\n    for (const x of tableData) {\r\n      temparr.push(`${x.generation} ${x.name}`);\r\n    }\r\n    for (var i = 0; i < temparr.length; ++i) {\r\n      str += '<option value=\"' + temparr[i] + '\" />';\r\n    }\r\n    list.innerHTML = str;\r\n    try {\r\n      $(\"#toggle-slide\").checked = false;\r\n      $(\"div.Create\").css(\"display\", \"block\");\r\n      $(\"#Modal\").css(\"display\", \"block\");\r\n      $(\"#nameInputC\")\r\n        .attr(\"placeholder\", \"\")\r\n        .val(\"\")\r\n        .css(\"border-bottom\", \"2px solid #bebed2\");\r\n      $(\"#genInputC\").val(\"\");\r\n      $(\"#birthdateInputC\").val(\"\");\r\n      $(\"#parentInputC\")\r\n        .val(\"\")\r\n        .css(\"border-bottom\", \"2px solid #bebed2\")\r\n        .attr(\"placeholder\", \"\");\r\n    } catch {}\r\n  };\r\n\r\n  const removeChildren = (id, arr) => {\r\n    let children = arr.filter((x) => {\r\n      return x.pid === Number(id);\r\n    });\r\n    arr = arr.filter((x) => {\r\n      return x.pid !== Number(id);\r\n    });\r\n    arr = arr.filter((x) => {\r\n      return x.isPartner !== 1;\r\n    });\r\n    try {\r\n      if (children.length > 0) {\r\n        for (let i = 0; i < children.length; i++) {\r\n          arr = removeChildren(children[i].id, arr);\r\n        }\r\n      }\r\n    } catch {}\r\n    return arr;\r\n  };\r\n\r\n  const openNode = (row) => {\r\n    $(\"#parentInput\").css(\"border-bottom\", \"2px solid #bebed2\");\r\n    $(\"#parentInput\").val(\"\");\r\n    $(\"#parentInput\").attr(\"placeholder\", \"Parent/Partner\");\r\n    let str,\r\n      id = \"\";\r\n    let list = document.getElementById(\"parentSearchDataList\");\r\n    //populate parentSearchDataList\r\n    let temparr = tableData;\r\n    try {\r\n      if (nodestate.isPartner === 1) {\r\n        id = null;\r\n        for (let i = 0; i < tableData.length; i++) {\r\n          let name = `${tableData[i].generation} ${tableData[i].name}`;\r\n          if (nodestate.partner === name) {\r\n            id = tableData[i].id;\r\n          } else {\r\n            if (nodestate.partner === tableData[i].name) id = tableData[i].id;\r\n          }\r\n        }\r\n      } else id = nodestate.id;\r\n    } catch {\r\n      id = nodestate.id;\r\n    }\r\n    temparr = removeChildren(id, temparr);\r\n    setDatalist(temparr);\r\n    for (var i = 0; i < temparr.length; ++i) {\r\n      str +=\r\n        '<option value=\"' +\r\n        temparr[i].generation +\r\n        \" \" +\r\n        temparr[i].name +\r\n        '\" />';\r\n    }\r\n    list.innerHTML = str;\r\n\r\n    //only runs if its a database entry\r\n    if (\r\n      !isNaN(row.firstChild.textContent) &&\r\n      row.firstChild.textContent !== \"0\"\r\n    ) {\r\n      nodestate.isPartner ? setRadiochecked(false) : setRadiochecked(true);\r\n      //sort out edit menu\r\n      populateEditFields(nodestate);\r\n      $(\"#Modal\").css(\"display\", \"block\");\r\n      $(\"#editForm\").css(\"display\", \"block\");\r\n      $(\"div.edit-container\").css(\"display\", \"flex\");\r\n    }\r\n  };\r\n\r\n  const showNode = (row) => {\r\n    try {\r\n      let tempData = tableData;\r\n      let partners = tempData.filter((x) => x.isPartner === 1);\r\n      tempData = tempData.filter((x) => x.isPartner !== 1);\r\n      for (let i = 0; i < partners.length; i++) {\r\n        //get name of parent node\r\n        //make partner object an attribute of parent node (partnerinfo)\r\n        for (let x = 0; x < tempData.length; x++) {\r\n          if (tempData[x].id === partners[i].pid) {\r\n            tempData[x].partnerinfo = partners[i];\r\n          }\r\n        }\r\n      }\r\n      setTreeData(tempData);\r\n\r\n      //only runs if its a database entry\r\n      if (\r\n        !isNaN(row.firstChild.textContent) &&\r\n        row.firstChild.textContent !== \"0\"\r\n      ) {\r\n        setcurrentRow(row);\r\n        $(\"#card-container\").css(\"display\", \"block\");\r\n        //update current node json object\r\n        setNodestate(getNode(Number(row.firstChild.textContent)));\r\n      }\r\n    } catch {}\r\n  };\r\n\r\n  const closePopups = () => {\r\n    $(\"div.Create\").css(\"display\", \"none\");\r\n    $(\"#editForm\").css(\"display\", \"none\");\r\n    $(\"#deleteConfirmMenu\").css(\"display\", \"none\");\r\n    $(\"div.edit-container\").css(\"display\", \"none\");\r\n  };\r\n  $(\"#nav-link-two\").removeClass(\"active\");\r\n  $(\"#nav-link-one\").removeClass(\"active\");\r\n  $(\"#nav-link-one\").addClass(\"active\");\r\n  $(\"ul.header-navigation\").removeClass(\"hidden\");\r\n\r\n  return (\r\n    <div className=\"TableContainer\">\r\n      <div className=\"container\">\r\n        <div className=\"container-top\">\r\n          <div className=\"left\">\r\n            <h2>Family Tree Interactive Table View</h2>\r\n            <p>Click the table to interact.</p>\r\n            <button\r\n              type=\"button\"\r\n              className=\"refresh-table\"\r\n              onClick={() => {\r\n                updateTable();\r\n              }}\r\n            >\r\n              ⟳\r\n            </button>\r\n          </div>\r\n          <div className=\"right\">\r\n            <button id=\"createNew\" onClick={resetCreateFields}>\r\n              New Family Member\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <div className=\"container-body\">\r\n          <ReactTable data={tableData} open={openNode} show={showNode} />\r\n        </div>\r\n      </div>\r\n      <Modal close={closePopups} />\r\n      <Create\r\n        data={tableData}\r\n        getPID={getPID}\r\n        update={() => {\r\n          updateTable();\r\n        }}\r\n      />\r\n      <Edit\r\n        getPID={getPID}\r\n        getNode={(id) => getNode(id)}\r\n        radiochecked={radiochecked}\r\n        switchRadio={switchRadio}\r\n        data={tableData}\r\n        datalist={datalist}\r\n        nodedata={nodestate}\r\n        update={(obj) => {\r\n          dynamicUpdate(obj);\r\n        }}\r\n      />\r\n      <NodeCard\r\n        node={nodestate}\r\n        treeData={TreeData}\r\n        data={tableData}\r\n        update={(obj) => {\r\n          dynamicUpdate(obj);\r\n        }}\r\n        edit={() => {\r\n          openNode(currentRow);\r\n        }}\r\n      />\r\n      <ToastContainer\r\n        position=\"bottom-right\"\r\n        autoClose={5000}\r\n        hideProgressBar={false}\r\n        newestOnTop={false}\r\n        closeOnClick\r\n        rtl={false}\r\n        pauseOnFocusLoss\r\n        draggable\r\n        pauseOnHover\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","C:\\Users\\Jhun\\OneDrive\\Documents\\lay-family-tree\\client\\src\\components\\Create.js",[],"C:\\Users\\Jhun\\OneDrive\\Documents\\lay-family-tree\\client\\src\\components\\NodeCard.js",[],"C:\\Users\\Jhun\\OneDrive\\Documents\\lay-family-tree\\client\\src\\components\\Modal.js",[],"C:\\Users\\Jhun\\OneDrive\\Documents\\lay-family-tree\\client\\src\\components\\Edit.js",[],"C:\\Users\\Jhun\\OneDrive\\Documents\\lay-family-tree\\client\\src\\components\\React-Table-Components\\ReactTable.js",[],"C:\\Users\\Jhun\\OneDrive\\Documents\\lay-family-tree\\client\\src\\components\\NodeCardContent.js",[],"C:\\Users\\Jhun\\OneDrive\\Documents\\lay-family-tree\\client\\src\\components\\React-Table-Components\\GlobalFilter.js",[],"C:\\Users\\Jhun\\OneDrive\\Documents\\lay-family-tree\\client\\src\\components\\React-Table-Components\\columns.js",[],{"ruleId":"67","replacedBy":"68"},{"ruleId":"69","replacedBy":"70"},{"ruleId":"71","severity":1,"message":"72","line":4,"column":26,"nodeType":"73","messageId":"74","endLine":4,"endColumn":31},"no-native-reassign",["75"],"no-negated-in-lhs",["76"],"no-unused-vars","'toast' is defined but never used.","Identifier","unusedVar","no-global-assign","no-unsafe-negation"]